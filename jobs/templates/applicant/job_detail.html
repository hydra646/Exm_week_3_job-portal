{% extends 'base.html' %}

{% block title %}{{ job.title }} - Job Details{% endblock %}

{% block content %}
    <h2>{{ job.title }}</h2>
    <p><strong>Company:</strong> {{ job.company_name }}</p>
    <p><strong>Location:</strong> {{ job.location }}</p>
    <p><strong>Description:</strong></p>
    <p>{{ job.description }}</p>
    <p>Posted by: {{ job.posted_by.username }} on {{ job.created_at|date:"M d, Y H:i" }}</p>

    {% if user.is_authenticated and user.role == 'applicant' %}
        {% if not has_applied %}
            <p><a href="{% url 'apply_job' job.id %}" class="btn">Apply for this Job</a></p>
        {% else %}
            <p style="color: green; font-weight: bold;">You have already applied for this job.</p>
            <p><a href="{% url 'applicant_dashboard' %}" class="btn" style="background-color: #28a745;">View Your Applications</a></p>
        {% endif %}
    {% elif not user.is_authenticated %}
        <p><a href="{% url 'login' %}">Login</a> as an applicant to apply.</p>
    {% else %} {# User is employer #}
        <p>Employers cannot apply for jobs.</p>
    {% endif %}

    <p><a href="{% url 'job_list' %}" class="btn" style="background-color: #6c757d;">Back to Job Listings</a></p>
{% endblock %}